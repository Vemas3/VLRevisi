<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulasi Gaya Gravitasi - Virtual Lab Sains SD</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="style-simulasi-drag.css">
    
    <!-- Redirect Script -->
    <script>
        if (!sessionStorage.getItem('coverShown')) {
            window.location.href = 'cover.html';
        }
    </script>
    <style>
        body {
            visibility: hidden;
        }
        body.loaded {
            visibility: visible;
        }
    </style>
</head>
<body>
    <header class="simulasi-drag-header">
        <div class="header-content">
            <a href="simulasi.html" class="back-btn">â¬…ï¸ Kembali</a>
            <div class="title">
                <h1>ğŸŒ SIMULASI GAYA GRAVITASI</h1>
                <p>Drag & Drop Objek untuk Eksperimen</p>
            </div>
        </div>
    </header>

    <div class="simulasi-drag-container">
        <!-- Sidebar Kiri - Objek Drag & Drop -->
        <div class="objects-sidebar">
            <h3 class="sidebar-title">ğŸ¯ Objek Percobaan</h3>
            <div class="objects-grid">
                <div class="drag-object" draggable="true" data-type="apel" data-src="asset/apel.png">
                    <div class="object-icon">ğŸ</div>
                    <div class="object-name">Apel</div>
                </div>
                <div class="drag-object" draggable="true" data-type="bola" data-src="asset/bola.png">
                    <div class="object-icon">ğŸ€</div>
                    <div class="object-name">Bola</div>
                </div>
                <div class="drag-object" draggable="true" data-type="beban" data-src="asset/beban.png">
                    <div class="object-icon">âš–ï¸</div>
                    <div class="object-name">Beban</div>
                </div>
                <div class="drag-object" draggable="true" data-type="pohon" data-src="asset/pohon.png">
                    <div class="object-icon">ğŸŒ³</div>
                    <div class="object-name">Pohon</div>
                </div>
                <div class="drag-object" draggable="true" data-type="meja" data-src="asset/meja.png">
                    <div class="object-icon">ğŸª‘</div>
                    <div class="object-name">Meja</div>
                </div>
            </div>
        </div>

        <!-- Area Simulasi Tengah -->
        <div class="simulation-area" id="simulationArea">
            <div class="drop-zone" id="mainDropZone"></div>
        </div>

        <!-- Sidebar Kanan - Kontrol -->
        <div class="controls-sidebar">
            <h3 class="controls-title">ğŸ® Kontrol Simulasi</h3>
            
            <div class="control-buttons">
                <button class="control-btn play" onclick="jalankanSimulasi()">
                    â–¶ï¸ Jalankan Simulasi
                </button>
                <button class="control-btn reset" onclick="resetSimulasi()">
                    ğŸ”„ Reset Semua
                </button>
                <button class="control-btn" onclick="hapusSemuaObjek()">
                    ğŸ—‘ï¸ Hapus Objek
                </button>
            </div>

            <div class="data-panel">
                <h3>ğŸ“Š Data Pengamatan</h3>
                <div class="data-grid">
                    <div class="data-item">
                        <span class="data-label">Objek di Area:</span>
                        <span class="data-value" id="objectCount">0</span>
                    </div>
                    <div class="data-item">
                        <span class="data-label">Status:</span>
                        <span class="data-value" id="simStatus">Siap</span>
                    </div>
                    <div class="data-item">
                        <span class="data-label">Gaya Gravitasi:</span>
                        <span class="data-value" id="gravityForce">-</span>
                    </div>
                    <div class="data-item">
                        <span class="data-label">Waktu Jatuh:</span>
                        <span class="data-value" id="fallTime">-</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script-simulasi-drag.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            document.body.classList.add('loaded');
            initDragAndDrop();
        });

        function jalankanSimulasi() {
            const objects = document.querySelectorAll('.dropped-object');
            if (objects.length === 0) {
                alert('ğŸš« Silakan tarik objek ke area simulasi terlebih dahulu!');
                return;
            }

            document.getElementById('simStatus').textContent = 'Berjalan...';
            document.getElementById('gravityForce').textContent = 'Aktif';
            
            const fallingObjects = document.querySelectorAll('.dropped-object[data-type="apel"], .dropped-object[data-type="bola"], .dropped-object[data-type="beban"]');
            
            if (fallingObjects.length > 0) {
                let fallCount = 0;
                const totalObjects = fallingObjects.length;
                
                fallingObjects.forEach((obj, index) => {
                    setTimeout(() => {
                        obj.style.transition = 'all 1.5s ease-in-out';
                        obj.style.transform = 'translateY(200px)';
                        
                        fallCount++;
                        document.getElementById('fallTime').textContent = `${fallCount}/${totalObjects} jatuh`;
                        
                        if (fallCount === totalObjects) {
                            setTimeout(() => {
                                document.getElementById('simStatus').textContent = 'Selesai';
                                alert('ğŸŒ Semua benda jatuh karena gaya gravitasi bumi!');
                            }, 1000);
                        }
                    }, index * 500);
                });
            } else {
                alert('âš ï¸ Tarik benda yang bisa jatuh (apel, bola, atau beban)!');
                document.getElementById('simStatus').textContent = 'Siap';
                document.getElementById('gravityForce').textContent = '-';
            }
        }

        function resetSimulasi() {
            document.querySelectorAll('.dropped-object').forEach(obj => {
                obj.style.transform = 'none';
                obj.remove();
            });
            document.getElementById('objectCount').textContent = '0';
            document.getElementById('simStatus').textContent = 'Siap';
            document.getElementById('gravityForce').textContent = '-';
            document.getElementById('fallTime').textContent = '-';
        }

        function hapusSemuaObjek() {
            document.querySelectorAll('.dropped-object').forEach(obj => obj.remove());
            document.getElementById('objectCount').textContent = '0';
        }
    </script>
</body>
</html>