<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulasi Gaya Pegas - Virtual Lab Sains SD</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="style-simulasi-drag.css">
    
    <!-- Redirect Script -->
    <script>
        if (!sessionStorage.getItem('coverShown')) {
            window.location.href = 'cover.html';
        }
    </script>
    <style>
        body {
            visibility: hidden;
        }
        body.loaded {
            visibility: visible;
        }
    </style>
</head>
<body>
    <header class="simulasi-drag-header">
        <div class="header-content">
            <a href="simulasi.html" class="back-btn">â¬…ï¸ Kembali</a>
            <div class="title">
                <h1>ğŸ’¨ SIMULASI GAYA PEGAS</h1>
                <p>Drag & Drop Objek untuk Eksperimen</p>
            </div>
        </div>
    </header>

    <div class="simulasi-drag-container">
        <!-- Sidebar Kiri - Objek Drag & Drop -->
        <div class="objects-sidebar">
            <h3 class="sidebar-title">ğŸ¯ Objek Percobaan</h3>
            <div class="objects-grid">
                <div class="drag-object" draggable="true" data-type="trampolin" data-src="asset/trampolin.png">
                    <div class="object-icon">ğŸ›ï¸</div>
                    <div class="object-name">Trampolin</div>
                </div>
                <div class="drag-object" draggable="true" data-type="manusia" data-src="asset/manusialompat.png">
                    <div class="object-icon">ğŸ‘¦</div>
                    <div class="object-name">Manusia</div>
                </div>
                <div class="drag-object" draggable="true" data-type="bola" data-src="asset/bola.png">
                    <div class="object-icon">ğŸ€</div>
                    <div class="object-name">Bola</div>
                </div>
                <div class="drag-object" draggable="true" data-type="pegas" data-src="asset/pegas.png">
                    <div class="object-icon">ğŸŒ€</div>
                    <div class="object-name">Pegas</div>
                </div>
                <div class="drag-object" draggable="true" data-type="beban" data-src="asset/beban.png">
                    <div class="object-icon">âš–ï¸</div>
                    <div class="object-name">Beban</div>
                </div>
            </div>
        </div>

        <!-- Area Simulasi Tengah -->
        <div class="simulation-area" id="simulationArea">
            <div class="drop-zone" id="mainDropZone"></div>
        </div>

        <!-- Sidebar Kanan - Kontrol -->
        <div class="controls-sidebar">
            <h3 class="controls-title">ğŸ® Kontrol Simulasi</h3>
            
            <div class="control-buttons">
                <button class="control-btn play" onclick="jalankanSimulasi()">
                    â–¶ï¸ Jalankan Simulasi
                </button>
                <button class="control-btn reset" onclick="resetSimulasi()">
                    ğŸ”„ Reset Semua
                </button>
                <button class="control-btn" onclick="hapusSemuaObjek()">
                    ğŸ—‘ï¸ Hapus Objek
                </button>
            </div>

            <div class="data-panel">
                <h3>ğŸ“Š Data Pengamatan</h3>
                <div class="data-grid">
                    <div class="data-item">
                        <span class="data-label">Objek di Area:</span>
                        <span class="data-value" id="objectCount">0</span>
                    </div>
                    <div class="data-item">
                        <span class="data-label">Status:</span>
                        <span class="data-value" id="simStatus">Siap</span>
                    </div>
                    <div class="data-item">
                        <span class="data-label">Gaya Pegas:</span>
                        <span class="data-value" id="springForce">-</span>
                    </div>
                    <div class="data-item">
                        <span class="data-label">Tinggi Lompat:</span>
                        <span class="data-value" id="jumpHeight">-</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script-simulasi-drag.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            document.body.classList.add('loaded');
            initDragAndDrop();
        });

        function jalankanSimulasi() {
            const objects = document.querySelectorAll('.dropped-object');
            if (objects.length === 0) {
                alert('ğŸš« Silakan tarik objek ke area simulasi terlebih dahulu!');
                return;
            }

            document.getElementById('simStatus').textContent = 'Berjalan...';
            
            const trampolin = document.querySelector('.dropped-object[data-type="trampolin"]');
            const manusia = document.querySelector('.dropped-object[data-type="manusia"]');
            const bola = document.querySelector('.dropped-object[data-type="bola"]');
            
            if (trampolin && (manusia || bola)) {
                document.getElementById('springForce').textContent = 'Kuat';
                document.getElementById('jumpHeight').textContent = 'Tinggi';
                
                // Animasi lompat
                if (manusia) {
                    manusia.style.transition = 'all 1s ease-in-out';
                    setTimeout(() => {
                        manusia.style.transform = 'translateY(-100px)';
                    }, 500);
                    setTimeout(() => {
                        manusia.style.transform = 'translateY(0)';
                    }, 1500);
                }
                
                if (bola) {
                    bola.style.transition = 'all 0.8s ease-in-out';
                    setTimeout(() => {
                        bola.style.transform = 'translateY(-80px)';
                    }, 300);
                    setTimeout(() => {
                        bola.style.transform = 'translateY(0)';
                    }, 1100);
                }
                
                setTimeout(() => {
                    document.getElementById('simStatus').textContent = 'Selesai';
                    alert('ğŸ‰ Simulasi selesai! Gaya pegas berhasil mendorong benda ke atas.');
                }, 2000);
            } else {
                alert('âš ï¸ Untuk simulasi gaya pegas, dibutuhkan trampolin dan manusia/bola!');
                document.getElementById('simStatus').textContent = 'Siap';
            }
        }

        function resetSimulasi() {
            document.querySelectorAll('.dropped-object').forEach(obj => obj.remove());
            document.getElementById('objectCount').textContent = '0';
            document.getElementById('simStatus').textContent = 'Siap';
            document.getElementById('springForce').textContent = '-';
            document.getElementById('jumpHeight').textContent = '-';
        }

        function hapusSemuaObjek() {
            document.querySelectorAll('.dropped-object').forEach(obj => obj.remove());
            document.getElementById('objectCount').textContent = '0';
        }
    </script>
</body>
</html>